<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Ny kund</title>
    <meta charset="UTF-8"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container py-4">

<h1 class="mb-4">Skapa ny kund</h1>

<form th:action="@{/customers/new}" th:object="${customer}" method="post" class="needs-validation">
    <!-- Error handling block -->
    <div th:if="${#fields.hasErrors('*')}" class="alert alert-danger">
        <ul>
            <li th:each="err : ${#fields.errors('*')}" th:text="${err}"></li>
        </ul>
    </div>

    <!-- Replace instead of insert to preserve th:object context -->
    <div class="mb-4" th:replace="fragments/customer-form-fragment :: customerFields"></div>

    <div class="mb-4 form-check">
        <input type="checkbox" class="form-check-input" id="hasPaid" th:field="*{hasPaid}" />
        <label class="form-check-label" for="hasPaid">Har betalat</label>
    </div>

    <div class="d-flex gap-3">
        <button type="submit" class="btn btn-primary px-4">Spara</button>
        <a href="/" class="btn btn-secondary px-4">Tillbaka</a>
    </div>
</form>

</body>
</html>
